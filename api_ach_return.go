/*
MX Platform API

The MX Platform API is a powerful, fully-featured API designed to make aggregating and enhancing financial data easy and reliable. It can seamlessly connect your app or website to tens of thousands of financial institutions.  Just getting started? See our [use case guides](/use-cases/). 

API version: 20111101
*/

// Code generated by OpenAPI Generator (https://openapi-generator.tech); DO NOT EDIT.

package mxplatformgo

import (
	"bytes"
	"context"
	"io"
	"net/http"
	"net/url"
	"strings"
)


// AchReturnAPIService AchReturnAPI service
type AchReturnAPIService service

type ApiCreateACHReturnRequest struct {
	ctx context.Context
	ApiService *AchReturnAPIService
	aCHReturnCreateRequestBody *ACHReturnCreateRequestBody
}

// ACH return object to be created.
func (r ApiCreateACHReturnRequest) ACHReturnCreateRequestBody(aCHReturnCreateRequestBody ACHReturnCreateRequestBody) ApiCreateACHReturnRequest {
	r.aCHReturnCreateRequestBody = &aCHReturnCreateRequestBody
	return r
}

func (r ApiCreateACHReturnRequest) Execute() (*ACHReturnResponseBody, *http.Response, error) {
	return r.ApiService.CreateACHReturnExecute(r)
}

/*
CreateACHReturn Create ACH Return

:::warning
The features documented here are in a beta state, and this documentation is considered draft material subject to frequent change.
:::

Use this endpoint to create an ACH return in our system.


 @param ctx context.Context - for authentication, logging, cancellation, deadlines, tracing, etc. Passed from http.Request or context.Background().
 @return ApiCreateACHReturnRequest
*/
func (a *AchReturnAPIService) CreateACHReturn(ctx context.Context) ApiCreateACHReturnRequest {
	return ApiCreateACHReturnRequest{
		ApiService: a,
		ctx: ctx,
	}
}

// Execute executes the request
//  @return ACHReturnResponseBody
func (a *AchReturnAPIService) CreateACHReturnExecute(r ApiCreateACHReturnRequest) (*ACHReturnResponseBody, *http.Response, error) {
	var (
		localVarHTTPMethod   = http.MethodPost
		localVarPostBody     interface{}
		formFiles            []formFile
		localVarReturnValue  *ACHReturnResponseBody
	)

	localBasePath, err := a.client.cfg.ServerURLWithContext(r.ctx, "AchReturnAPIService.CreateACHReturn")
	if err != nil {
		return localVarReturnValue, nil, &GenericOpenAPIError{error: err.Error()}
	}

	localVarPath := localBasePath + "/ach_returns"

	localVarHeaderParams := make(map[string]string)
	localVarQueryParams := url.Values{}
	localVarFormParams := url.Values{}
	if r.aCHReturnCreateRequestBody == nil {
		return localVarReturnValue, nil, reportError("aCHReturnCreateRequestBody is required and must be specified")
	}

	// to determine the Content-Type header
	localVarHTTPContentTypes := []string{"application/json"}

	// set Content-Type header
	localVarHTTPContentType := selectHeaderContentType(localVarHTTPContentTypes)
	if localVarHTTPContentType != "" {
		localVarHeaderParams["Content-Type"] = localVarHTTPContentType
	}

	// to determine the Accept header
	localVarHTTPHeaderAccepts := []string{"application/vnd.mx.api.v1+json"}

	// set Accept header
	localVarHTTPHeaderAccept := selectHeaderAccept(localVarHTTPHeaderAccepts)
	if localVarHTTPHeaderAccept != "" {
		localVarHeaderParams["Accept"] = localVarHTTPHeaderAccept
	}
	// body params
	localVarPostBody = r.aCHReturnCreateRequestBody
	req, err := a.client.prepareRequest(r.ctx, localVarPath, localVarHTTPMethod, localVarPostBody, localVarHeaderParams, localVarQueryParams, localVarFormParams, formFiles)
	if err != nil {
		return localVarReturnValue, nil, err
	}

	localVarHTTPResponse, err := a.client.callAPI(req)
	if err != nil || localVarHTTPResponse == nil {
		return localVarReturnValue, localVarHTTPResponse, err
	}

	localVarBody, err := io.ReadAll(localVarHTTPResponse.Body)
	localVarHTTPResponse.Body.Close()
	localVarHTTPResponse.Body = io.NopCloser(bytes.NewBuffer(localVarBody))
	if err != nil {
		return localVarReturnValue, localVarHTTPResponse, err
	}

	if localVarHTTPResponse.StatusCode >= 300 {
		newErr := &GenericOpenAPIError{
			body:  localVarBody,
			error: localVarHTTPResponse.Status,
		}
		return localVarReturnValue, localVarHTTPResponse, newErr
	}

	err = a.client.decode(&localVarReturnValue, localVarBody, localVarHTTPResponse.Header.Get("Content-Type"))
	if err != nil {
		newErr := &GenericOpenAPIError{
			body:  localVarBody,
			error: err.Error(),
		}
		return localVarReturnValue, localVarHTTPResponse, newErr
	}

	return localVarReturnValue, localVarHTTPResponse, nil
}

type ApiListACHRetrunsRequest struct {
	ctx context.Context
	ApiService *AchReturnAPIService
	institutionGuid *string
	returnedAt *string
	resolvedStatusAt *string
	returnCode *string
	returnStatus *string
	page *int32
	recordsPerPage *int32
}

// The identifier for the institution associated with the ACH return. Defined by MX.
func (r ApiListACHRetrunsRequest) InstitutionGuid(institutionGuid string) ApiListACHRetrunsRequest {
	r.institutionGuid = &institutionGuid
	return r
}

// The date and time when the return was reported by the Receiving Financial Depository Institution (RDFI) in ISO 8601 format without timestamp.
func (r ApiListACHRetrunsRequest) ReturnedAt(returnedAt string) ApiListACHRetrunsRequest {
	r.returnedAt = &returnedAt
	return r
}

// The date and time when the return was resolved by the Receiving Financial Depository Institution (RDFI) in ISO 8601 format without timestamp
func (r ApiListACHRetrunsRequest) ResolvedStatusAt(resolvedStatusAt string) ApiListACHRetrunsRequest {
	r.resolvedStatusAt = &resolvedStatusAt
	return r
}

// The associated ACH return code and notice of change code. See [Return Codes](/api-reference/platform-api/reference/ach-return-fields#return-codes) for a complete list.
func (r ApiListACHRetrunsRequest) ReturnCode(returnCode string) ApiListACHRetrunsRequest {
	r.returnCode = &returnCode
	return r
}

// The status of the return. See [Return Statuses](/api-reference/platform-api/reference/ach-return-fields#return-status) for a complete list.
func (r ApiListACHRetrunsRequest) ReturnStatus(returnStatus string) ApiListACHRetrunsRequest {
	r.returnStatus = &returnStatus
	return r
}

// Results are paginated. Specify current page.
func (r ApiListACHRetrunsRequest) Page(page int32) ApiListACHRetrunsRequest {
	r.page = &page
	return r
}

// This specifies the number of records to be returned on each page. Defaults to &#x60;25&#x60;. The valid range is from &#x60;10&#x60; to &#x60;100&#x60;. If the value exceeds &#x60;100&#x60;, the default value of &#x60;25&#x60; will be used instead.
func (r ApiListACHRetrunsRequest) RecordsPerPage(recordsPerPage int32) ApiListACHRetrunsRequest {
	r.recordsPerPage = &recordsPerPage
	return r
}

func (r ApiListACHRetrunsRequest) Execute() (*ACHReturnsResponseBody, *http.Response, error) {
	return r.ApiService.ListACHRetrunsExecute(r)
}

/*
ListACHRetruns List ACH Returns

:::warning
The features documented here are in a beta state, and this documentation is considered draft material subject to frequent change.
:::

Use this endpoint to get all ACH returns.


 @param ctx context.Context - for authentication, logging, cancellation, deadlines, tracing, etc. Passed from http.Request or context.Background().
 @return ApiListACHRetrunsRequest
*/
func (a *AchReturnAPIService) ListACHRetruns(ctx context.Context) ApiListACHRetrunsRequest {
	return ApiListACHRetrunsRequest{
		ApiService: a,
		ctx: ctx,
	}
}

// Execute executes the request
//  @return ACHReturnsResponseBody
func (a *AchReturnAPIService) ListACHRetrunsExecute(r ApiListACHRetrunsRequest) (*ACHReturnsResponseBody, *http.Response, error) {
	var (
		localVarHTTPMethod   = http.MethodGet
		localVarPostBody     interface{}
		formFiles            []formFile
		localVarReturnValue  *ACHReturnsResponseBody
	)

	localBasePath, err := a.client.cfg.ServerURLWithContext(r.ctx, "AchReturnAPIService.ListACHRetruns")
	if err != nil {
		return localVarReturnValue, nil, &GenericOpenAPIError{error: err.Error()}
	}

	localVarPath := localBasePath + "/ach_returns"

	localVarHeaderParams := make(map[string]string)
	localVarQueryParams := url.Values{}
	localVarFormParams := url.Values{}

	if r.institutionGuid != nil {
		parameterAddToHeaderOrQuery(localVarQueryParams, "institution_guid", r.institutionGuid, "")
	}
	if r.returnedAt != nil {
		parameterAddToHeaderOrQuery(localVarQueryParams, "returned_at", r.returnedAt, "")
	}
	if r.resolvedStatusAt != nil {
		parameterAddToHeaderOrQuery(localVarQueryParams, "resolved_status_at", r.resolvedStatusAt, "")
	}
	if r.returnCode != nil {
		parameterAddToHeaderOrQuery(localVarQueryParams, "return_code", r.returnCode, "")
	}
	if r.returnStatus != nil {
		parameterAddToHeaderOrQuery(localVarQueryParams, "return_status", r.returnStatus, "")
	}
	if r.page != nil {
		parameterAddToHeaderOrQuery(localVarQueryParams, "page", r.page, "")
	}
	if r.recordsPerPage != nil {
		parameterAddToHeaderOrQuery(localVarQueryParams, "records_per_page", r.recordsPerPage, "")
	}
	// to determine the Content-Type header
	localVarHTTPContentTypes := []string{}

	// set Content-Type header
	localVarHTTPContentType := selectHeaderContentType(localVarHTTPContentTypes)
	if localVarHTTPContentType != "" {
		localVarHeaderParams["Content-Type"] = localVarHTTPContentType
	}

	// to determine the Accept header
	localVarHTTPHeaderAccepts := []string{"application/vnd.mx.api.v1+json"}

	// set Accept header
	localVarHTTPHeaderAccept := selectHeaderAccept(localVarHTTPHeaderAccepts)
	if localVarHTTPHeaderAccept != "" {
		localVarHeaderParams["Accept"] = localVarHTTPHeaderAccept
	}
	req, err := a.client.prepareRequest(r.ctx, localVarPath, localVarHTTPMethod, localVarPostBody, localVarHeaderParams, localVarQueryParams, localVarFormParams, formFiles)
	if err != nil {
		return localVarReturnValue, nil, err
	}

	localVarHTTPResponse, err := a.client.callAPI(req)
	if err != nil || localVarHTTPResponse == nil {
		return localVarReturnValue, localVarHTTPResponse, err
	}

	localVarBody, err := io.ReadAll(localVarHTTPResponse.Body)
	localVarHTTPResponse.Body.Close()
	localVarHTTPResponse.Body = io.NopCloser(bytes.NewBuffer(localVarBody))
	if err != nil {
		return localVarReturnValue, localVarHTTPResponse, err
	}

	if localVarHTTPResponse.StatusCode >= 300 {
		newErr := &GenericOpenAPIError{
			body:  localVarBody,
			error: localVarHTTPResponse.Status,
		}
		return localVarReturnValue, localVarHTTPResponse, newErr
	}

	err = a.client.decode(&localVarReturnValue, localVarBody, localVarHTTPResponse.Header.Get("Content-Type"))
	if err != nil {
		newErr := &GenericOpenAPIError{
			body:  localVarBody,
			error: err.Error(),
		}
		return localVarReturnValue, localVarHTTPResponse, newErr
	}

	return localVarReturnValue, localVarHTTPResponse, nil
}

type ApiReadACHRetrunRequest struct {
	ctx context.Context
	ApiService *AchReturnAPIService
	achReturnGuid string
}

func (r ApiReadACHRetrunRequest) Execute() (*ACHReturnResponseBody, *http.Response, error) {
	return r.ApiService.ReadACHRetrunExecute(r)
}

/*
ReadACHRetrun Read ACH Return

:::warning
The features documented here are in a beta state, and this documentation is considered draft material subject to frequent change.
:::

Use this endpoint to get an ACH return by its `guid` or `id`.


 @param ctx context.Context - for authentication, logging, cancellation, deadlines, tracing, etc. Passed from http.Request or context.Background().
 @param achReturnGuid The unique identifier (`guid`) for the ACH return. Defined by MX.
 @return ApiReadACHRetrunRequest
*/
func (a *AchReturnAPIService) ReadACHRetrun(ctx context.Context, achReturnGuid string) ApiReadACHRetrunRequest {
	return ApiReadACHRetrunRequest{
		ApiService: a,
		ctx: ctx,
		achReturnGuid: achReturnGuid,
	}
}

// Execute executes the request
//  @return ACHReturnResponseBody
func (a *AchReturnAPIService) ReadACHRetrunExecute(r ApiReadACHRetrunRequest) (*ACHReturnResponseBody, *http.Response, error) {
	var (
		localVarHTTPMethod   = http.MethodGet
		localVarPostBody     interface{}
		formFiles            []formFile
		localVarReturnValue  *ACHReturnResponseBody
	)

	localBasePath, err := a.client.cfg.ServerURLWithContext(r.ctx, "AchReturnAPIService.ReadACHRetrun")
	if err != nil {
		return localVarReturnValue, nil, &GenericOpenAPIError{error: err.Error()}
	}

	localVarPath := localBasePath + "/ach_returns/{ach_return_guid}"
	localVarPath = strings.Replace(localVarPath, "{"+"ach_return_guid"+"}", url.PathEscape(parameterValueToString(r.achReturnGuid, "achReturnGuid")), -1)

	localVarHeaderParams := make(map[string]string)
	localVarQueryParams := url.Values{}
	localVarFormParams := url.Values{}

	// to determine the Content-Type header
	localVarHTTPContentTypes := []string{}

	// set Content-Type header
	localVarHTTPContentType := selectHeaderContentType(localVarHTTPContentTypes)
	if localVarHTTPContentType != "" {
		localVarHeaderParams["Content-Type"] = localVarHTTPContentType
	}

	// to determine the Accept header
	localVarHTTPHeaderAccepts := []string{"application/vnd.mx.api.v1+json"}

	// set Accept header
	localVarHTTPHeaderAccept := selectHeaderAccept(localVarHTTPHeaderAccepts)
	if localVarHTTPHeaderAccept != "" {
		localVarHeaderParams["Accept"] = localVarHTTPHeaderAccept
	}
	req, err := a.client.prepareRequest(r.ctx, localVarPath, localVarHTTPMethod, localVarPostBody, localVarHeaderParams, localVarQueryParams, localVarFormParams, formFiles)
	if err != nil {
		return localVarReturnValue, nil, err
	}

	localVarHTTPResponse, err := a.client.callAPI(req)
	if err != nil || localVarHTTPResponse == nil {
		return localVarReturnValue, localVarHTTPResponse, err
	}

	localVarBody, err := io.ReadAll(localVarHTTPResponse.Body)
	localVarHTTPResponse.Body.Close()
	localVarHTTPResponse.Body = io.NopCloser(bytes.NewBuffer(localVarBody))
	if err != nil {
		return localVarReturnValue, localVarHTTPResponse, err
	}

	if localVarHTTPResponse.StatusCode >= 300 {
		newErr := &GenericOpenAPIError{
			body:  localVarBody,
			error: localVarHTTPResponse.Status,
		}
		return localVarReturnValue, localVarHTTPResponse, newErr
	}

	err = a.client.decode(&localVarReturnValue, localVarBody, localVarHTTPResponse.Header.Get("Content-Type"))
	if err != nil {
		newErr := &GenericOpenAPIError{
			body:  localVarBody,
			error: err.Error(),
		}
		return localVarReturnValue, localVarHTTPResponse, newErr
	}

	return localVarReturnValue, localVarHTTPResponse, nil
}
